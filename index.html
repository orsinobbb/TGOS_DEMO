<!DOCTYPE html>
<html>
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>TGOS MAP API for Web 點擊及隱藏地圖標記</title>
        <script type="text/javascript" src="http://api.tgos.tw/TGOS_API/tgos?ver=2&AppID=x+JLVSx85Lk=&APIKey=in8W74q0ogpcfW/STwicK8D5QwCdddJf05/7nb+OtDh8R99YN3T0LurV4xato3TpL/fOfylvJ9Wv/khZEsXEWxsBmg+GEj4AuokiNXCh14Rei21U5GtJpIkO++Mq3AguFK/ISDEWn4hMzqgrkxNe1Q==" charset="utf-8"></script>
        <!--下載後請將yourID及yourkey取代為您申請所取得的APPID及APIKEY方能正確顯示服務-->
        <script type="text/javascript">
            var pTGMarker; //Marker物件
            var ls = [];
            var markerPoint; //Marker位置
            var markerTitle; //Marker標題
            var markerImg; //Marker圖片
            var pMap;
            function InitWnd() {
                var pOMap = document.getElementById("TGMap");
                pMap = new TGOS.TGOnlineMap(pOMap, TGOS.TGCoordSys.EPSG3857); //宣告TGOnlineMap地圖物件並設定坐標系統
                var sZoom = 12;
                pMap.setZoom(sZoom);
                //markerPoint = new TGOS.TGPoint(302430.958, 2770552.360);
                //markerImg = new TGOS.TGImage("https://api.tgos.tw/TGOS_API/images/marker.png",
                //    new TGOS.TGSize(38, 33), new TGOS.TGPoint(0, 0), new TGOS.TGPoint(10, 33));
                //pTGMarker = new TGOS.TGMarker(pMap, markerPoint, "內政部", markerImg);
                //加入Marker(地圖物件,Marker坐標,Marker標題,Marker圖案)
                //pMap.setCenter(ls[0].value);
                var linedata = JSON.parse("{\"coordinates\":[[121.49242222309111,25.09001026419077],[121.49361312389374,25.089058044216003],[121.49419248104094,25.088547923324462],[121.49516344070433,25.08757625860085],[121.49624705314635,25.086458834631447],[121.49691224098206,25.08591469404832],[121.49745941162108,25.085380267906537],[121.4978241920471,25.084549473543618],[121.49840891361237,25.083670088571605],[121.4991706609726,25.082392296938554],[121.49979829788207,25.081308835788576],[121.50071561336516,25.07967147944268],[121.50119304656982,25.078976689568417],[121.50157392024995,25.07826731961489],[121.5018153190613,25.077871333914956],[121.50254487991333,25.075842798128686],[121.50303304195404,25.074458029848145],[121.50361776351927,25.072626224591048],[121.50413274765015,25.07077009688698],[121.50454312562941,25.068780316183574],[121.50465041399002,25.06743191161828],[121.50476038455963,25.067130644425486],[121.50465846061707,25.065534401855647],[121.50457262992859,25.06471319133492],[121.50443315505983,25.063984301646116],[121.50416493415833,25.06314121383057],[121.50341928005217,25.061542489592156],[121.50326907634735,25.061309239327304],[121.50202989578247,25.058923257992024],[121.50177776813507,25.058529639498893],[121.50133252143861,25.058024250937844],[121.50014698505402,25.057134956390232],[121.49934232234953,25.05648863444565],[121.49685859680177,25.05445731471564],[121.49416029453279,25.05215381572384],[121.49158000946044,25.049971769371528]]}");
                addpTGMarkerls(linedata);


                addpTGMarker(121.500522, 25.057305);
                addpTGMarker(121.504744, 25.067748);
                addpTGMarker(121.50123, 25.079195);
                addpTGMarker(121.48956, 25.09228);

            }


            function addpTGMarker(x, y) {
                markerPoint = new TGOS.TGPoint(x, y);
                markerImg = new TGOS.TGImage("https://api.tgos.tw/TGOS_API/images/marker.png",
                    new TGOS.TGSize(38, 33), new TGOS.TGPoint(0, 0), new TGOS.TGPoint(10, 33));
                pTGMarker = new TGOS.TGMarker(pMap, markerPoint, "內政部", markerImg);
                ls.push(pTGMarker);
                pMap.setCenter(markerPoint);
            }
            function addpTGMarkerls(linedata) {
                var path1 = [];
                linedata.coordinates.forEach(
                    function (value) {
                        var p = new TGOS.TGPoint(value[0], value[1])
                        path1.push(p)
                    }
                )
                //var p1 = new TGOS.TGPoint(121.49242222309111,25.09001026419077);
                //var p2 = new TGOS.TGPoint(121.49516344070433,25.08757625860085);
                //var p3 = new TGOS.TGPoint(121.50133252143861,25.058024250937844);
                //var path1 = [p1, p2, p3];
                var s1 = new TGOS.TGLineString(path1);  //定義要繪出的折線path
                line = new TGOS.TGLine(pMap, s1, {  //繪出path為s1的線圖徵
                    strokeColor: '#00AA88',
                    strokeWeight: 3
                });
            }

            function clcikableMarker() {
                line.setVisible(document.getElementById("clickable").checked);
            }
            function visibleMarker() {
                pTGMarker.setVisible(document.getElementById("visible").checked);
                ls.forEach(
                    function (value) {
                        value.setVisible(document.getElementById("visible").checked);
                    }
                )
            }
            function getStatus() {
                alert("可點選狀態:" + pTGMarker.getClickable() + "\n顯示狀態:" + pTGMarker.getVisible());
            }
        </script>
    </head>
<body style="margin: 0px" onload="InitWnd();">
    <div id="TGMap" style="width: 640px; height: 480px; border: 1px solid #C0C0C0;">
    </div>
    <br />
    三重光纖<input id="clickable" type="checkbox" onclick="clcikableMarker()" checked="checked" />
    抽水站<input id="visible" type="checkbox" onclick="visibleMarker()" checked="checked" /><br />
</body>
</html>
